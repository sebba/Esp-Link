  <div id="main">
    <div class="header">
      <h1 class="jl">WiFi Configuration</h1>
    </div>

    <div class="content" style="max-width: none !important;">
      <div class="pure-g">
        <div class="pure-u-1 pure-u-md-1-2">
            <div id="hostname-card" class="card">
              <table class="pure-table pure-table-horizontal"><tbody>
                  <tr><td class="td_header"><h1>Hostname</h1></td></tr>
                  <tr><td><input class="system-name" maxlength=31 id="change-hostname-input" placeholder="Type hostname here..."></input></td></tr>
                  <tr><td><button id="change-hostname-button" class="pure-button button-primary button-larger-margin" >CHANGE</button></td></tr>
               </tbody> </table>
            </div>
          <br>
            <div class="card">
              <div id="alertWiFiMode">Switch to AP+SPA mode to enable network selection.</div>
              <table class="pure-table pure-table-horizontal"><tbody>
                <tr><td class="td_header"><h1>Wifi Connection</h1></td></tr>
              </tbody> </table>
              <p id="reconnect" style="color: #600; padding:0 18px" hidden></p>
              <form action="#" id="wifiform" class="pure-form pure-form-stacked">
                <legend>To connect to a WiFi network, please select one of the detected networks,
                   enter the password, and hit the connect button...</legend>
                <label>Network SSID</label>
                <div id="aps">Scanning... <div class="spinner spinner-small"></div></div>
                <label for="opt-hiddenssid">
                  <input type="radio" name="essid" value="_hidden_ssid_" id="opt-hiddenssid">
                  <input type="text" id="hidden-ssid" value="" style="width:60%; display:inline-block; margin-left: 0.7em" placeholder="Hidden network">
                </label>
                <label>WiFi password, if applicable:</label>
                <input id="wifi-passwd" type="password" name="passwd" placeholder="password">
                <button id="connect-button" type="submit" class="pure-button button-primary button-larger-margin">Connect</button>
              </form>
            </div>
        </div>
        <div class="pure-u-1 pure-u-md-1-2"><div class="card" style="overflow: auto;">
          <div id="wifi-spinner" class="spinner spinner-small"></div>
          <table id="wifi-table" class="pure-table pure-table-horizontal" hidden><tbody>
          <tr><td class="td_header" colspan="2"><h1>WiFi Status</h1></td></tr>
          <tr><td>WiFi channel</td><td id="wifi-chan"></td></tr>
          <tr><td>Configured network</td><td id="wifi-ssid"></td></tr>
          <tr><td>WiFi status</td><td id="wifi-status"></td></tr>
          <tr><td>WiFi address</td><td id="wifi-ip"></td></tr>
          <tr><td>WiFi rssi</td><td id="wifi-rssi"></td></tr>
          <tr><td>WiFi phy</td><td id="wifi-phy"></td></tr>
          <tr><td>WiFi MAC</td><td id="wifi-mac"></td></tr>
          <tr><td>WiFi mode</td><td id="wifi-mode"></td></tr>

          <tr><td>Soft-AP SSID</td><td id="wifi-apssid"></td></tr>
          <tr><td>Soft-AP Auth Mode</td><td id="wifi-apauth"></td></tr>

          <tr><td colspan="2" id="wifi-warn"></td></tr>
          </tbody> </table>
          </div>

          <br>

          <div id="APSettings-box" class="card">
            <div id="alertAPSettings">AP main settings, use with care!</div>
            <table class="pure-table pure-table-horizontal"><tbody>
            <tr><td class="td_header"><h1>Soft-AP Settings</h1></td></tr>
            </tbody> </table>

            <div id="AP_Settings-spinner" class="spinner spinner-small"></div>

            <form action="#" id="AP_Settings-form" class="pure-form" hidden>
              <div class="pure-form-stacked">
                <label>Soft-AP SSID</label>
                <input type="text" name="ap_ssid" />
              </div>

              <div class="pure-form-stacked">
                <label>Soft-AP Password</label>
                <input type="text" name="ap_password" />
              </div>

              <div class="pure-form-stacked">
                <legend>Soft-AP Advanced Settings</legend>
              </div>

              <div class="form-horizontal">
                <label for="AP_Settings-ron" style="margin-right:1em">
                  <input type="radio" name="ap" value="on" id="AP_Settings-ron"/>
                  Show </label>
                <label for="AP_Settings-roff" style="margin-right:1em">
                  <input type="radio" name="ap" value="off" id="AP_Settings-roff"/>
                  Hide </label>
              </div>

              <div id="AP_Settings-off" class="pure-form-stacked"></div>
              <div id="AP_Settings-on" class="pure-form-stacked">

                <div class="pure-form-stacked">
                  <label>Soft-AP Max Connections</label>
                  <input type="text" name="ap_maxconn" />
                </div>

                <div class="pure-form-stacked">
                  <label>Soft-AP Auth Mode</label>
                  <select name="ap_authmode" href="#">
                    <option value="0">OPEN</option>
                    <option value="1">WEP</option>
                    <option value="2">WPA_PSK</option>
                    <option value="3">WPA2_PSK</option>
                    <option value="4">WPA_WPA2_PSK</option>
                  </select>
                </div>

              </div>

              <button id="AP_Settings-button" type="submit" class="pure-button button-primary button-larger-margin">Change Soft-AP settings</button>

            </form>
          </div>
          <br>

          <div class="card">
            <table class="pure-table pure-table-horizontal"><tbody>
            <tr><td class="td_header"><h1>Advanced</h1></td></tr>
            </tbody> </table>

            <form action="#" id="specform" class="pure-form">
              <!--legend>Special settings, use with care!</legend-->
              <div class="form-horizontal">
                <label for="dhcp-ron" style="margin-right:1em">
                  <input type="radio" name="dhcp" value="on" id="dhcp-ron"/>
                  DHCP</label>
                  <br>
                <label for="dhcp-roff">
                  <input type="radio" name="dhcp" value="off" id="dhcp-roff"/>
                  Static IP</label>
              </div>
              <div id="dhcp-on" class="pure-form-stacked"></div>
              <div id="dhcp-off" class="pure-form-stacked">
                <label>Static IP address</label>
                <input id="wifi-staticip" type="text" name="staticip"/>
                <label>Netmask (for static IP)</label>
                <input id="wifi-netmask" type="text" name="netmask"/>
                <label>Gateway (for static IP)</label>
                <input id="wifi-gateway" type="text" name="gateway"/>
              </div>
              <button id="special-button" type="submit" class="pure-button button-primary button-larger-margin">Change</button>
            </form>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
</script>
<script src="wifi.js"></script>
<script type="text/javascript">
onLoad(function() {
  getWifiInfo();
  fetchApSettings();

  undoApAdvanced();
  bnd($("#AP_Settings-ron"), "click", doApAdvanced);
  bnd($("#AP_Settings-roff"), "click", undoApAdvanced);
  bnd($("#AP_Settings-form"), "submit", changeApSettings);

  bnd($('#APSettings-box'), "mouseover", displayAPAlert);
  bnd($('#APSettings-box'), "mouseout", hideAPAlert);

  bnd($("#wifiform"), "submit", changeWifiAp);
  bnd($("#specform"), "submit", changeSpecial);
  bnd($("#change-hostname-button"), "click", changeHostname);
  bnd($("#change-hostname-input"), "keypress", hostnameLimitations);
  bnd($("#dhcp-ron"), "click", doDhcp);
  bnd($("#dhcp-roff"), "click", doStatic);
  scanTimeout = window.setTimeout(scanAPs, 500);
});
</script>
</body></html>

